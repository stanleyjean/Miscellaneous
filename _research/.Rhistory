unique(dfe$region)
dfe <- dfe %>% filter(obsTime == "2014")
dfe <- dfe %>% filter(GENDER == "T")
length(unique(dfe$REG_ID))
length(unique(dfsc$REG_ID))
length(unique(dfrb$REG_ID))
length(unique(dfe$region))
length(unique(dfrb$region))
length(unique(dfsc$region))
unique(dfe$region)
unique(dfsc$region)
# Only Total gender, GENDER variable == "T"
dfe <- rf(Edu)
dfe <- ff(dfe)
unique(dfe$region)
dfe %>% filter(region = "RU")
dfe %>% filter(region == "RU")
dfe %>% filter(region == "RU") %>% print(n = Inf)
dfe <- rf(Edu)
dfe <- ff(dfe)
dfe <- dfe %>% filter(obsTime == "2014")
dfe <- dfe %>% filter(GENDER == "T")
dfsc <- rf(SoEn)
dfsc <- ff1(dfsc)
dfsc <- dfsc %>% filter(TIME == "2014")
dfsc <- dfsc %>% filter(POS == "ALL")
dfsc <- dfsc %>% filter(TL == "2")
dfrb <- rf(RWB)
dfrb <- ff(dfrb)
dfrb <- dfrb %>% filter(obsTime == "2014")
rb <- dfrb %>% select(REG_ID, IND, obsTime, obsValue, region)
sc <- dfsc %>% select(TL, REG_ID, IND, TIME, obsValue, region)
ee <- dfe %>% select(REG_ID, IND, ISC11, obsTime, obsValue, region)
rb
sc
ee
df <- inner_join(rb, sc, by = "REG_ID")
df
rm(df)
rb %>% pivot_wider(names_from = "IND", values_from = 'obsValue')
sc %>% pivot_wider(names_from = "IND", values_from = 'obsValue')
ee %>% pivot_wider(names_from = "IND", values_from = 'obsValue')
ee
dstruc_edu$ISC11
ee %>% filter(str_detect(IND, "EARLY_LEAVERS_RATE_Y18T24|NEAC_SHARE"))
sc %>% filter(str_detect(IND, "EXCLU|LEAVERS|NEET|HOUSING|VEH_THEFT_RA"))
ee <- ee %>% filter(str_detect(IND, "EARLY_LEAVERS_RATE_Y18T24|NEAC_SHARE"))
sc <- sc %>% filter(str_detect(IND, "EXCLU|LEAVERS|NEET|HOUSING|VEH_THEFT_RA"))
ee %>% pivot_wider(names_from = "IND", values_from = 'obsValue')
dstruc_edu$ISC11
dstruc_edu$IND
ee %>% filter(ISC11 == "L6")
unique((ee %>% filter(ISC11 == "L6"))$region)
unique((ee %>% filter(ISC11 == "T"))$region)
t1 <- rb %>% pivot_wider(names_from = "IND", values_from = 'obsValue')
t2 <- sc %>% pivot_wider(names_from = "IND", values_from = 'obsValue')
df <- inner_join(t1, t2, by = "REG_ID")
df %>% head()
t1
t2
df <- inner_join(t1, t2 %>% select(-TL), by = "REG_ID")
df %>% head()
t1 %>% select(-c("obsTIme"))
t1 %>% select(-c("obsTime"))
t1 <- t1 %>% select(-c("obsTime"))
t2
t2 <- t2 %>% select(-c("TL", "TIME"))
df <- inner_join(t1, t2, by = "REG_ID")
df %>% head()
df
unique(df$REG_ID)
df$region.x
df$region.y
sc$region
unique(sc$region)
unique(rb$region)
# Only total pos, POS == ALL
dfsc <- rf(SoEn)
unique(dfsc$REG_ID)
dfsc <- ff1(dfsc)
unique(dfsc$region)
dfsc <- dfsc %>% filter(TIME == "2014")
dfsc <- dfsc %>% filter(POS == "ALL")
dfsc <- dfsc %>% filter(TL == "2")
unique(dfsc$region)
sc <- dfsc %>% select(REG_ID, IND, TIME, obsValue, region)
unique(sc$region)
sc <- sc %>% filter(str_detect(IND, "EXCLU|LEAVERS|NEET|HOUSING|VEH_THEFT_RA"))
unique(sc$region)
sc <- dfsc %>% select(REG_ID, IND, TIME, obsValue, region)
unique(sc$region)
sc %>% filter(region == "KR")
unique(sc[sc$region == "KR"]$IND)
sc[sc$region == "KR"]
sc
sc$region == "KR"
sc[sc$region == "KR"]
sc %>% filter(region == "KR")
unique((sc %>% filter(region == "KR"))$IND)
ee
ee <- ee %>% filter(str_detect(IND, "EARLY_LEAVERS_RATE_Y18T24|NEAC_SHARE"))
sc <- sc %>% filter(str_detect(IND, "EXCLU|LEAVERS|NEET|HOUSING|VEH_THEFT_RA"))
eet1 <- rb %>% pivot_wider(names_from = "IND", values_from = 'obsValue')
rm(eet1)
t1 <- rb %>% pivot_wider(names_from = "IND", values_from = 'obsValue')
t2 <- sc %>% pivot_wider(names_from = "IND", values_from = 'obsValue')
t1 <- t1 %>% select(-c("obsTime"))
t2 <- t2 %>% select(-c("TIME"))
df <- inner_join(t1, t2, by = "REG_ID")
df %>% head()
df
df$region.x == df$region.y
df$region.x
df
t1
t2
t1 <- rb %>% pivot_wider(names_from = "IND", values_from = 'obsValue')
t2 <- sc %>% pivot_wider(names_from = "IND", values_from = 'obsValue')
t1 <- t1 %>% select(-c("obsTime", "region"))
t2 <- t2 %>% select(-c("TIME", "region"))
df <- inner_join(t1, t2, by = "REG_ID")
df
df %>% mutate(region = str_sub(REG_ID, start = 1, end = 2))
df %>% mutate(region = str_sub(REG_ID, start = 1, end = 2)) %>%
relocate(region, before = 1)
df <- df %>% mutate(region = str_sub(REG_ID, start = 1, end = 2)) %>%
relocate(region, before = 1)
colnames(df)
df <- inner_join(t1, t2, by = "REG_ID")
df <- df %>% mutate(region = str_sub(REG_ID, start = 1, end = 2)) %>%
relocate(region)
colnames(df)
df
colnames(df)
write.csv(colnames(df), "joined_col.csv")
df %>%
ggplot(aes(x = VEH_THEFT_RA, y = SUBJ_LIFE_SAT)) +
geom_point(aes(colour = region)) +
geom_smooth(se = F) +
theme_economist() +
stat_poly_eq()
df %>%
ggplot(aes(x = VEH_THEFT_RA, y = SUBJ_LIFE_SAT)) +
geom_point(aes(colour = region)) +
geom_smooth(se = F, method = "lm") +
theme_economist() +
stat_poly_eq()
hgd_close())
hgd_close()
hgd()
hgd_view()
df %>%
ggplot(aes(x = VEH_THEFT_RA, y = SUBJ_LIFE_SAT)) +
geom_point(aes(colour = region)) +
geom_smooth(se = F, method = "lm") +
theme_economist() +
stat_poly_eq()
df %>%
ggplot(aes(x = VEH_THEFT_RA, y = SUBJ_LIFE_SAT)) +
geom_point(aes(colour = region)) +
geom_smooth(se = F, method = "lm") +
theme_tufte() +
stat_poly_eq()
df %>%
ggplot(aes(x = VEH_THEFT_RA, y = SUBJ_LIFE_SAT)) +
geom_point(aes(colour = region)) +
geom_smooth(se = F, method = "lm") +
theme_solid() +
stat_poly_eq()
df %>%
ggplot(aes(x = VEH_THEFT_RA, y = SUBJ_LIFE_SAT)) +
geom_point(aes(colour = region)) +
geom_smooth(se = F, method = "lm") +
theme_economist_white() +
stat_poly_eq()
hgd()
hgd_view()
df %>%
ggplot(aes(x = EMP_RA, y = SUBJ_LIFE_SAT)) +
geom_point(aes(colour = region)) +
geom_smooth(se = F, method = "lm") +
theme_economist_white() +
stat_poly_eq()
df %>%
ggplot(aes(x = INCOME_DISP, y = SUBJ_LIFE_SAT)) +
geom_point(aes(colour = region)) +
geom_smooth(se = F, method = "lm") +
theme_economist_white() +
stat_poly_eq()
df %>%
ggplot(aes(x = NEET_T_RA, y = SUBJ_LIFE_SAT)) +
geom_point(aes(colour = region)) +
geom_smooth(se = F, method = "lm") +
theme_economist_white() +
stat_poly_eq()
df %>%
ggplot(aes(x = LEAVERS_T_RA, y = SUBJ_LIFE_SAT)) +
geom_point(aes(colour = region)) +
geom_smooth(se = F, method = "lm") +
theme_economist_white() +
stat_poly_eq()
df %>%
ggplot(aes(x = AIR_POL, y = SUBJ_LIFE_SAT)) +
geom_point(aes(colour = region)) +
geom_smooth(se = F, method = "lm") +
theme_economist_white() +
stat_poly_eq()
df %>%
ggplot(aes(x = HOMIC_RA, y = SUBJ_LIFE_SAT)) +
geom_point(aes(colour = region)) +
geom_smooth(se = F, method = "lm") +
theme_economist_white() +
stat_poly_eq()
ee
t3 <- ee %>% select(-c("obsTime", "region"))
t3
dd <- inner_join(t1, t3, by ="REG_ID")
dd
t3 <- ee %>% pivot_wider(names_from = "IND", values_from = 'obsValue')
ee
ee <- ee %>% filter(ISC11 == "T")
t3 <- ee %>% pivot_wider(names_from = "IND", values_from = 'obsValue')
ee
t3 <- ee %>% pivot_wider(names_from = "IND", values_from = 'obsValue')
ee %>%
dplyr::group_by(REG_ID, ISC11, obsTime, region, IND) %>%
dplyr::summarise(n = dplyr::n(), .groups = "drop") %>%
dplyr::filter(n > 1L)
# Only Total gender, GENDER variable == "T"
dfe <- rf(Edu)
dfe <- ff(dfe)
dfe <- dfe %>% filter(obsTime == "2014")
dfe <- dfe %>% filter(GENDER == "T")
ee <- dfe %>% select(REG_ID, IND, ISC11, obsTime, obsValue)
ee %>%
dplyr::group_by(REG_ID, ISC11, obsTime, region, IND) %>%
dplyr::summarise(n = dplyr::n(), .groups = "drop") %>%
dplyr::filter(n > 1L)
t3 <- ee %>% pivot_wider(names_from = "IND", values_from = 'obsValue')
ee %>%
dplyr::group_by(REG_ID, ISC11, obsTime, IND) %>%
dplyr::summarise(n = dplyr::n(), .groups = "drop") %>%
dplyr::filter(n > 1L)
RWB
colnames(RWB)
RWB %>%
lib_call
lib_call
lib_call()
colnames(RWB)
RWB %>% select(-c('MEAS', 'TIME_FORMAT', 'UNIT', 'POWERCODE'))
df <- RWB %>% select(-c('MEAS', 'TIME_FORMAT', 'UNIT', 'POWERCODE'))
df %>% pivot_wider(names_from = "IND", values_from = "obsVallue")
df %>% pivot_wider(names_from = "IND", values_from = "obsValue")
df <- df %>% pivot_wider(names_from = "IND", values_from = "obsValue")
dstruc_wb$IND
RWB$IND
unique(RWB$IND)
ff
library(httpgd)
hgd()
hgd_view()
df
df %>%
ggplot(aes(x = STD_MORT, y = SUBJ_LIFE_SAT)) +
geom_point(aes(colour = obsTime)) +
geom_smooth(se = F, aes(colour = obsTime)) +
theme_tufte() +
scale_color_wsj()
hgd_browse()
df <- df %>% mutate(region = str_sub(REG_ID, start = 1, end = 2))
df %>%
ggplot(aes(x = STD_MORT, y = SUBJ_LIFE_SAT)) +
geom_point(aes(colour = region)) +
geom_smooth(se = F, aes(colour = obsTime)) +
theme_tufte() +
scale_color_wsj() +
facet_wrap(~obsTime)
df %>%
ggplot(aes(x = STD_MORT, y = SUBJ_LIFE_SAT)) +
geom_point(aes(colour = region)) +
geom_smooth(se = F, aes(colour = obsTime)) +
theme_tufte() +
facet_wrap(~obsTime)
df %>%
ggplot(aes(x = STD_MORT, y = SUBJ_LIFE_SAT)) +
geom_point(aes(colour = region)) +
geom_smooth(se = F, aes(colour = region)) +
theme_tufte() +
facet_wrap(~obsTime)
df %>%
ggplot(aes(x = STD_MORT, y = SUBJ_LIFE_SAT)) +
geom_jitter(aes(colour = region)) +
geom_smooth(se = F, aes(colour = region)) +
theme_tufte() +
facet_wrap(~obsTime)
unique(RWB$IND)
df %>%
ggplot(aes(x = INCOME_DISP, y = SUBJ_LIFE_SAT)) +
geom_jitter(aes(colour = region)) +
geom_smooth(se = F, aes(colour = region)) +
theme_tufte() +
facet_wrap(~obsTime)
df %>%
ggplot(aes(x = INCOME_DISP, y = SUBJ_LIFE_SAT)) +
geom_jitter(aes(colour = region)) +
geom_smooth(se = F, method = "lm") +
theme_tufte() +
facet_wrap(~obsTime)
df %>%
ggplot(aes(x = INCOME_DISP, y = SUBJ_LIFE_SAT)) +
geom_jitter(aes(colour = region)) +
geom_smooth(se = F, method = "lm") +
theme_tufte() +
stat_poly_eq() +
facet_wrap(~obsTime)
df %>%
ggplot(aes(x = INCOME_DISP, y = SUBJ_LIFE_SAT)) +
geom_jitter(aes(colour = region)) +
geom_smooth(se = F, method = "lm") +
theme_tufte() +
stat_poly_eq() +
facet_wrap(~obsTime) +
scale_x_continuous(c(min(INCOME_DISP), max(INCOME_DISP)))
df %>%
ggplot(aes(x = INCOME_DISP, y = SUBJ_LIFE_SAT)) +
geom_jitter(aes(colour = region)) +
geom_smooth(se = F, method = "lm") +
theme_tufte() +
stat_poly_eq() +
facet_wrap(~obsTime) +
scale_x_continuous(limits = c(min(INCOME_DISP), max(INCOME_DISP)))
df %>%
ggplot(aes(x = INCOME_DISP, y = SUBJ_LIFE_SAT)) +
geom_jitter(aes(colour = region)) +
geom_smooth(se = F, method = "lm") +
theme_tufte() +
stat_poly_eq() +
facet_wrap(~obsTime) +
scale_x_continuous(limits = c(min(df$INCOME_DISP), max(df$INCOME_DISP)))
df %>% mutate(INCOME_DISP = log(INCOME_DISP)) %>%
ggplot(aes(x = INCOME_DISP, y = SUBJ_LIFE_SAT)) +
geom_jitter(aes(colour = region)) +
geom_smooth(se = F, method = "lm") +
theme_tufte() +
stat_poly_eq() +
facet_wrap(~obsTime) +
scale_x_continuous(limits = c(min(df$INCOME_DISP), max(df$INCOME_DISP)))
df
df %>% is.numeric(INCOME_DISP)
df %>% is.numeric(df$INCOME_DISP)
is.numeric(df$INCOME_DISP)
is.numeric(df)
df %>% mutate(INCOME_DISP = log(INCOME_DISP)) %>%
filter(obsTime = "2014") %>%
ggplot(aes(x = INCOME_DISP, y = SUBJ_LIFE_SAT)) +
geom_jitter(aes(colour = region)) +
geom_smooth(se = F, method = "lm") +
theme_tufte() +
stat_poly_eq() +
#  facet_wrap(~obsTime) +
scale_x_continuous(limits = c(min(df$INCOME_DISP), max(df$INCOME_DISP)))
df %>% mutate(INCOME_DISP = log(INCOME_DISP)) %>%
filter(obsTime == "2014") %>%
ggplot(aes(x = INCOME_DISP, y = SUBJ_LIFE_SAT)) +
geom_jitter(aes(colour = region)) +
geom_smooth(se = F, method = "lm") +
theme_tufte() +
stat_poly_eq() +
#  facet_wrap(~obsTime) +
scale_x_continuous(limits = c(min(df$INCOME_DISP), max(df$INCOME_DISP)))
nb.cols <- length(unique(df$region))
mycolors <- colorRampPalette(brewer.pal(8, "Set3"))(nb.cols)
install.packages("RColorBrewers")
library(RColorBrewer)
mycolors <- colorRampPalette(brewer.pal(8, "Set3"))(nb.cols)
df %>% mutate(INCOME_DISP = log(INCOME_DISP)) %>%
filter(obsTime == "2014") %>%
ggplot(aes(x = INCOME_DISP, y = SUBJ_LIFE_SAT)) +
geom_jitter(aes(colour = region)) +
geom_smooth(se = F, method = "lm") +
theme_tufte() +
stat_poly_eq() +
#  facet_wrap(~obsTime) +
scale_x_continuous(limits = c(min(df$INCOME_DISP), max(df$INCOME_DISP))) +
scale_colour_manual(value = mycolors)
df %>% mutate(INCOME_DISP = log(INCOME_DISP)) %>%
filter(obsTime == "2014") %>%
ggplot(aes(x = INCOME_DISP, y = SUBJ_LIFE_SAT)) +
geom_jitter(aes(colour = region)) +
geom_smooth(se = F, method = "lm") +
theme_tufte() +
stat_poly_eq() +
#  facet_wrap(~obsTime) +
scale_x_continuous(limits = c(min(df$INCOME_DISP), max(df$INCOME_DISP))) +
scale_colour_manual(values = mycolors)
df %>% mutate(INCOME_DISP = log(INCOME_DISP)) %>%
filter(KO != "KO") %>%
filter(obsTime == "2014") %>%
ggplot(aes(x = INCOME_DISP, y = SUBJ_LIFE_SAT)) +
geom_jitter(aes(colour = region)) +
geom_smooth(se = F, method = "lm") +
theme_tufte() +
stat_poly_eq() +
#  facet_wrap(~obsTime) +
scale_x_continuous(limits = c(min(df$INCOME_DISP), max(df$INCOME_DISP))) +
scale_colour_manual(values = mycolors)
df %>% mutate(INCOME_DISP = log(INCOME_DISP)) %>%
filter(region != "KO") %>%
filter(obsTime == "2014") %>%
ggplot(aes(x = INCOME_DISP, y = SUBJ_LIFE_SAT)) +
geom_jitter(aes(colour = region)) +
geom_smooth(se = F, method = "lm") +
theme_tufte() +
stat_poly_eq() +
#  facet_wrap(~obsTime) +
scale_x_continuous(limits = c(min(df$INCOME_DISP), max(df$INCOME_DISP))) +
scale_colour_manual(values = mycolors)
df %>% mutate(INCOME_DISP = log(INCOME_DISP)) %>%
filter(str_detect(region, "KO|LU")) %>%
filter(obsTime == "2014") %>%
ggplot(aes(x = INCOME_DISP, y = SUBJ_LIFE_SAT)) +
geom_jitter(aes(colour = region)) +
geom_smooth(se = F, method = "lm") +
theme_tufte() +
stat_poly_eq() +
#  facet_wrap(~obsTime) +
scale_x_continuous(limits = c(min(df$INCOME_DISP), max(df$INCOME_DISP))) +
scale_colour_manual(values = mycolors)
df %>% mutate(INCOME_DISP = log(INCOME_DISP)) %>%
filter(!str_detect(region, "KO|LU")) %>%
filter(obsTime == "2014") %>%
ggplot(aes(x = INCOME_DISP, y = SUBJ_LIFE_SAT)) +
geom_jitter(aes(colour = region)) +
geom_smooth(se = F, method = "lm") +
theme_tufte() +
stat_poly_eq() +
#  facet_wrap(~obsTime) +
scale_x_continuous(limits = c(min(df$INCOME_DISP), max(df$INCOME_DISP))) +
scale_colour_manual(values = mycolors)
df %>% mutate(INCOME_DISP = log(INCOME_DISP)) %>%
filter(!str_detect(region, "KO|LU|ME")) %>%
filter(obsTime == "2014") %>%
ggplot(aes(x = INCOME_DISP, y = SUBJ_LIFE_SAT)) +
geom_jitter(aes(colour = region)) +
geom_smooth(se = F, method = "lm") +
theme_tufte() +
stat_poly_eq() +
#  facet_wrap(~obsTime) +
scale_x_continuous(limits = c(min(df$INCOME_DISP), max(df$INCOME_DISP))) +
scale_colour_manual(values = mycolors)
df %>% mutate(INCOME_DISP = log(INCOME_DISP)) %>%
filter(!str_detect(region, "ME")) %>%
filter(obsTime == "2014") %>%
ggplot(aes(x = INCOME_DISP, y = SUBJ_LIFE_SAT)) +
geom_jitter(aes(colour = region)) +
geom_smooth(se = F, method = "lm") +
theme_tufte() +
stat_poly_eq() +
#  facet_wrap(~obsTime) +
scale_x_continuous(limits = c(min(df$INCOME_DISP), max(df$INCOME_DISP))) +
scale_colour_manual(values = mycolors)
df %>%
ggplot(aes(x = HOMIC_RA, y = SUBJ_LIFE_SAT)) +
geom_point(aes(colour = region)) +
geom_smooth(se = F, method = "lm") +
theme_economist_white() +
stat_poly_eq()
library(tidyverse)
library(ggthemes)
df %>%
ggplot(aes(x = HOMIC_RA, y = SUBJ_LIFE_SAT)) +
geom_point(aes(colour = region)) +
geom_smooth(se = F, method = "lm") +
theme_economist_white() +
stat_poly_eq()
library(ggpmisc)
df %>%
ggplot(aes(x = HOMIC_RA, y = SUBJ_LIFE_SAT)) +
geom_point(aes(colour = region)) +
geom_smooth(se = F, method = "lm") +
theme_economist_white() +
stat_poly_eq()
hgd()
hgd_view()
hgd::hgd()
library(httpgd)
hgd()
hgd_view()
df %>% mutate(INCOME_DISP = log(INCOME_DISP)) %>%
filter(!str_detect(region, "ME")) %>%
filter(obsTime == "2014") %>%
ggplot(aes(x = INCOME_DISP, y = SUBJ_LIFE_SAT)) +
geom_jitter(aes(colour = region)) +
geom_smooth(se = F, method = "lm") +
theme_tufte() +
stat_poly_eq() +
#  facet_wrap(~obsTime) +
scale_x_continuous(limits = c(min(df$INCOME_DISP), max(df$INCOME_DISP))) +
scale_colour_manual(values = mycolors)
df %>% mutate(INCOME_DISP = log(INCOME_DISP)) %>%
filter(str_detect(region, "KR")) %>%
filter(!str_detect(region, "ME")) %>%
filter(obsTime == "2014") %>%
ggplot(aes(x = INCOME_DISP, y = SUBJ_LIFE_SAT)) +
geom_jitter(aes(colour = region)) +
geom_smooth(se = F, method = "lm") +
theme_tufte() +
stat_poly_eq() +
#  facet_wrap(~obsTime) +
scale_x_continuous(limits = c(min(df$INCOME_DISP), max(df$INCOME_DISP))) +
scale_colour_manual(values = mycolors)
